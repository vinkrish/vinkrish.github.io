{"data":{"site":{"siteMetadata":{"title":"TunedReality","author":"Vinay"}},"markdownRemark":{"id":"df3a3b11-96a0-5149-9bd4-09ec1af656cf","excerpt":"Every time I create new blog these are the steps involved. gatsby build Remove content of Github Pages repo and push the commit, this ensures unused files are…","html":"<p>Every time I create new blog these are the steps involved.</p>\n<ul>\n<li>gatsby build</li>\n<li>Remove content of Github Pages repo and push the commit, this ensures unused files are removed.</li>\n<li>Copy content of public folder from source repo to GitHub Pages repo, push the commit.</li>\n<li>Finally source repo needs to be commited and pushed.</li>\n</ul>\n<p>As I was doing it manually, this is against DRY (Don’t Repeat Yourself) principle.</p>\n<p>This is how I come up with automating this task with these bash scripts:</p>\n<ol>\n<li>\n<p>One repo requires cleaning old content or else unused files will live on.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\nREPO_DIR<span class=\"token operator\">=</span>/Users/vinkrish/Documents/workspace/javascript/vinkrish.github.io\n<span class=\"token function\">cd</span> <span class=\"token variable\">$REPO_DIR</span>\n<span class=\"token function\">rm</span> -r *\n\n<span class=\"token function\">git</span> add <span class=\"token keyword\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"deleting cache and previous files\"</span>\n<span class=\"token function\">git</span> push origin master</code></pre></div>\n</li>\n<li>\n<p>Updating two repos with newly added blog post</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token function\">read</span> blog_name\nREPO_DIR<span class=\"token operator\">=</span>/Users/vinkrish/Documents/workspace/javascript/vinkrish.github.io\nSRC_DIR<span class=\"token operator\">=</span>/Users/vinkrish/Documents/workspace/javascript/my-blog-starter\n\n<span class=\"token function\">cp</span> -R <span class=\"token variable\">$SRC_DIR</span>/public/* <span class=\"token variable\">$REPO_DIR</span>\n\n<span class=\"token function\">cd</span> <span class=\"token variable\">$REPO_DIR</span>\n<span class=\"token function\">git</span> add <span class=\"token keyword\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"added <span class=\"token variable\">$blog_name</span>\"</span>\n<span class=\"token function\">git</span> push origin master\n\n<span class=\"token function\">cd</span> <span class=\"token variable\">$SRC_DIR</span>\n<span class=\"token function\">git</span> add <span class=\"token keyword\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"added <span class=\"token variable\">$blog_name</span>\"</span>\n<span class=\"token function\">git</span> push origin master</code></pre></div>\n<p>You need to update <code class=\"language-text\">.bash_profile</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span><span class=\"token variable\">$PATH</span>:/Users/vinay/bin</code></pre></div>\n</li>\n</ol>\n<p>Your script will be in bin directory:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cd</span> ~\n<span class=\"token function\">mkdir</span> bin</code></pre></div>\n<p>Give permission for the script to be executable:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> u+x file_name</code></pre></div>\n<p>Now you can call <code class=\"language-text\">file_name</code> from terminal.</p>\n<p><strong>Update:</strong> I realised gh-pages allowes public folder of a app to be github pages, so I created another branch which has gatsby code and master branch now has generated public files, the above steps are unnecessary if you decide to go with this approach.</p>","frontmatter":{"title":"Automate - Remember DRY!","date":"January 27, 2019"}}},"pageContext":{"slug":"/markdown/automate/","previous":{"fields":{"slug":"/markdown/bash/"},"frontmatter":{"title":"You have to BASH!"}},"next":{"fields":{"slug":"/markdown/git-commands/"},"frontmatter":{"title":"Git Handy Commands"}}}}