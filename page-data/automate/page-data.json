{"componentChunkName":"component---src-templates-blog-post-js","path":"/automate/","result":{"data":{"site":{"siteMetadata":{"title":"TunedReality","author":"Vinay"}},"markdownRemark":{"id":"4f657550-458f-5783-bc38-05aa84bea926","excerpt":"Every time I create new blog these are the steps involved. (until I realised easy way - see below for update) gatsby build Remove content of Github Pages repo…","html":"<p>Every time I create new blog these are the steps involved. (until I realised easy way - see below for update)</p>\n<ul>\n<li>gatsby build</li>\n<li>Remove content of Github Pages repo and push the commit, this ensures unused files are removed.</li>\n<li>Copy content of public folder from source repo to GitHub Pages repo, push the commit.</li>\n<li>Finally source repo needs to be commited and pushed.</li>\n</ul>\n<p>As I was doing it manually, this is against DRY (Don’t Repeat Yourself) principle.</p>\n<p>This is how I come up with automating this task with these bash scripts:</p>\n<ol>\n<li>One repo requires cleaning old content or else unused files will live on.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">    <span class=\"token comment\">#!/bin/bash</span>\n    \n    <span class=\"token assign-left variable\">REPO_DIR</span><span class=\"token operator\">=</span>/Users/vinkrish/Documents/workspace/javascript/vinkrish.github.io\n    <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$REPO_DIR</span>\n    <span class=\"token function\">rm</span> -r *\n    \n    <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n    <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"deleting cache and previous files\"</span>\n    <span class=\"token function\">git</span> push origin master</code></pre></div>\n<ol start=\"2\">\n<li>Updating two repos with newly added blog post</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">    <span class=\"token comment\">#!/bin/bash</span>\n    \n    <span class=\"token builtin class-name\">read</span> blog_name\n    <span class=\"token assign-left variable\">REPO_DIR</span><span class=\"token operator\">=</span>/Users/vinkrish/Documents/workspace/javascript/vinkrish.github.io\n    <span class=\"token assign-left variable\">SRC_DIR</span><span class=\"token operator\">=</span>/Users/vinkrish/Documents/workspace/javascript/my-blog-starter\n    \n    <span class=\"token function\">cp</span> -R <span class=\"token variable\">$SRC_DIR</span>/public/* <span class=\"token variable\">$REPO_DIR</span>\n    \n    <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$REPO_DIR</span>\n    <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n    <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"added <span class=\"token variable\">$blog_name</span>\"</span>\n    <span class=\"token function\">git</span> push origin master\n    \n    <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$SRC_DIR</span>\n    <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n    <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"added <span class=\"token variable\">$blog_name</span>\"</span>\n    <span class=\"token function\">git</span> push origin master</code></pre></div>\n<p>You need to update <code class=\"language-text\">.bash_profile</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span>:/Users/vinay/bin</code></pre></div>\n<p>Your script will be in bin directory:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~\n<span class=\"token function\">mkdir</span> bin</code></pre></div>\n<p>Give permission for the script to be executable:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> u+x file_name</code></pre></div>\n<p>Now you can call <code class=\"language-text\">file_name</code> from terminal.</p>\n<p><strong>Update:</strong> I realised gh-pages allowes public or docs folder of a app to be github pages, so I created another branch which has gatsby code and master branch now has generated public files, the above steps are unnecessary if you decide to go with this approach.</p>","frontmatter":{"title":"Automate - Remember DRY!","date":"January 27, 2019"}}},"pageContext":{"slug":"/automate/","previous":{"fields":{"slug":"/bash/"},"frontmatter":{"title":"You have to BASH!"}},"next":{"fields":{"slug":"/git-commands/"},"frontmatter":{"title":"Git Handy Commands"}}}},"staticQueryHashes":["3128451518","3297874162"]}